<!DOCTYPE html>
<html>
<head>
 <link rel="stylesheet" type="text/css" href="../css/main.css">
 <title>rchu.cc - custom rofi menus</title>
</head>
<body>
<ul class="navbar">
 <li><a href="https://rchu.cc/">rchu.cc</a></li>
 <li><a href="https://github.com/Bracktus">code</a></li>
 <li><a href="https://rchu.cc/blog.html">blog</a></li>
 <li><a href="https://rchu.cc/dots.html">dotfiles</a></li>
</ul>
</div>
<div class="article">
 <div class="article-header">
  <H1>custom rofi menus</H1>
  <H4>Written on: 05-08-2020</H4>
 </div>
 <div class="article-content">
  <p><a href="https://github.com/davatorium/rofi">rofi</a> is a menu application. It switches windows, launches apps, and much much more. One function of rofi is creating custom menus. In order to do so you'll need to use the <code>-dmenu</code> flag. First you’ll pass in the options you want to display on the screen. After the selection is chosen, the choice is outputted in <code>STDOUT</code>. This allows you to take the output and perform an action based on the selection.</p>
  
  <p>It’ll be clearer if you see an example. Below is a script using rofi to take a screenshot.</p>
<!----------------------------------------- CODE BLOCK START -------------------------------------------------------------------->
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nv">rofi_command</span><span class="o">=</span><span class="s2">&quot;rofi -theme </span><span class="nv">$HOME</span><span class="s2">/bin/rofi-menus/scrot/scrot-menu.rasi -dmenu&quot;</span>

<span class="c1">### Options ###</span>
<span class="nv">screenClip</span><span class="o">=</span><span class="s2">&quot;   Entire Screen (Save to clipboard)&quot;</span>
<span class="nv">areaClip</span><span class="o">=</span><span class="s2">&quot; 麗  Select Area (Save to clipboard)&quot;</span>
<span class="nv">windowClip</span><span class="o">=</span><span class="s2">&quot;   Current Window (Save to clipboard)&quot;</span>
<span class="nv">screenFile</span><span class="o">=</span><span class="s2">&quot;   Screen (Save to file)&quot;</span>
<span class="nv">areaFile</span><span class="o">=</span><span class="s2">&quot; 麗  Entire Area (Save to file)&quot;</span>
<span class="nv">windowFile</span><span class="o">=</span><span class="s2">&quot;   Current Window (Save to file)&quot;</span>

<span class="c1"># Variable passed to rofi</span>
<span class="nv">options</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$screenClip</span><span class="s2">\n</span><span class="nv">$screenFile</span><span class="s2">\n</span><span class="nv">$windowClip</span><span class="s2">\n</span><span class="nv">$windowFile</span><span class="s2">\n</span><span class="nv">$areaClip</span><span class="s2">\n</span><span class="nv">$areaFile</span><span class="s2">&quot;</span>

<span class="nv">chosen</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> -e <span class="s2">&quot;</span><span class="nv">$options</span><span class="s2">&quot;</span> <span class="p">|</span> <span class="nv">$rofi_command</span> -p <span class="s2">&quot;Screenshot&quot;</span> -i<span class="k">)</span><span class="s2">&quot;</span>
<span class="k">case</span> <span class="nv">$chosen</span> in
  <span class="nv">$screenClip</span><span class="o">)</span>
    sleep 0.2 
    scrot /tmp/temp_shot.png
    xclip -selection clipboard -i -t image/png /tmp/temp_shot.png
    notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to clipboard&quot;</span>
    <span class="p">;;</span>
  <span class="nv">$screenFile</span><span class="o">)</span>
    sleep 0.2 
    scrot <span class="nv">$HOME</span>/<span class="s2">&#39;pics/screenshots/%Y-%m-%d_%H%M%S.png&#39;</span>
    notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to ~/pics/screenshots&quot;</span>
    <span class="p">;;</span>
  <span class="nv">$windowClip</span><span class="o">)</span>
    sleep 0.2  
    scrot -u /tmp/temp_shot.png
    xclip -selection clipboard -i -t image/png /tmp/temp_shot.png
    notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to clipboard&quot;</span>
    <span class="p">;;</span>
  <span class="nv">$windowFile</span><span class="o">)</span>
    sleep 0.2
    scrot -u <span class="nv">$HOME</span>/<span class="s2">&#39;pics/screenshots/%Y-%m-%d_%H%M%S.png&#39;</span>
    notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to ~/pics/screenshots&quot;</span>
    <span class="p">;;</span>
  <span class="nv">$areaClip</span><span class="o">)</span>
    sleep 0.2 
    scrot -s /tmp/temp_shot.png
    xclip -selection clipboard -i -t image/png /tmp/temp_shot.png
    notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to clipboard&quot;</span>
    <span class="p">;;</span>  
  <span class="nv">$areaFile</span><span class="o">)</span>
    sleep 0.2 
    scrot -s <span class="nv">$HOME</span>/<span class="s2">&#39;pics/screenshots/%Y-%m-%d_%H%M%S.png&#39;</span>
    notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to ~/pics/screenshots&quot;</span>
    <span class="p">;;</span>
<span class="k">esac</span>
</div>
<!----------------------------------------- CODE BLOCK END -------------------------------------------------------------------->
  <h3>So how does it work?</h3>
  <p>First we define the command. I also specify a theme so that it looks nice.</p>
<div class = multi-code>  
<span class="ch">#!/bin/bash</span>
<br><span class="nv">rofi_command</span><span class="o">=</span><span class="s2">&quot;rofi -theme </span><span class="nv">$HOME</span><span class="s2">/bin/rofi-menus/scrot/scrot-menu.rasi -dmenu&quot;</span>
</div>
  <p>Next we store each selection in a variable. This will be what the user sees in the menu. We then store all of the options in a variable each separated by 1 line.</p>
<div class = multi-code>
     <span class="c1">### Options ###</span>
   <br><span class="nv">screenClip</span><span class="o">=</span><span class="s2">&quot;   Entire Screen (Save to clipboard)&quot;</span>
   <br><span class="nv">areaClip</span><span class="o">=</span><span class="s2">&quot; 麗  Select Area (Save to clipboard)&quot;</span>
   <br><span class="nv">windowClip</span><span class="o">=</span><span class="s2">&quot;   Current Window (Save to clipboard)&quot;</span>
   <br><span class="nv">screenFile</span><span class="o">=</span><span class="s2">&quot;   Screen (Save to file)&quot;</span>
   <br><span class="nv">areaFile</span><span class="o">=</span><span class="s2">&quot; 麗  Entire Area (Save to file)&quot;</span>
   <br><span class="nv">windowFile</span><span class="o">=</span><span class="s2">&quot;   Current Window (Save to file)&quot;</span>
   <br>
   <br><span class="c1"># Variable passed to rofi</span>
   <br><span class="nv">options</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$screenClip</span><span class="s2">\n</span><span class="nv">$screenFile</span><span class="s2">\n</span><span class="nv">$windowClip</span><span class="s2">\n</span><span class="nv">$windowFile</span><span class="s2">\n</span><span class="nv">$areaClip</span><span class="s2">\n</span><span class="nv">$areaFile</span><span class="s2">&quot;</span>
</div>
  <p>This is then piped into the rofi command we defined earlier.</p>
  <code><span class="nv">chosen</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span> -e <span class="s2">&quot;</span><span class="nv">$options</span><span class="s2">&quot;</span> <span class="p">|</span> <span class="nv">$rofi_command</span> -p <span class="s2">&quot;Screenshot&quot;</span> -i<span class="k">)</span><span class="s2">&quot;</span></code>
  <p><code>echo -e</code> outputs our options without displaying the newline characters, <code>-p</code> is to set the prompt text and <code>-i</code> makes it case insensitive.</p>
  <p>Once the user makes a selection, the output is then stored. We then can use a switch case statement to perform an action based on which option was picked.</p>

<div class=multi-code>
<span class="k">case</span> <span class="nv">$chosen</span> in
  <br><span class="nv">$screenClip</span><span class="o">)</span>
    <br>&nbsp;&nbsp;sleep 0.2 
    <br>&nbsp;&nbsp;scrot /tmp/temp_shot.png
    <br>&nbsp;&nbsp;xclip -selection clipboard -i -t image/png /tmp/temp_shot.png
    <br>&nbsp;&nbsp;notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to clipboard&quot;</span>
    <br><span class="p">;;</span>
  <br><span class="nv">$screenFile</span><span class="o">)</span>
    <br>&nbsp;&nbsp;sleep 0.2 
    <br>&nbsp;&nbsp;scrot <span class="nv">$HOME</span>/<span class="s2">&#39;pics/screenshots/%Y-%m-%d_%H%M%S.png&#39;</span>
    <br>&nbsp;&nbsp;notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to ~/pics/screenshots&quot;</span>
    <br><span class="p">;;</span>
  <br><span class="nv">$windowClip</span><span class="o">)</span>
    <br>&nbsp;&nbsp;sleep 0.2  
    <br>&nbsp;&nbsp;scrot -u /tmp/temp_shot.png
    <br>&nbsp;&nbsp;xclip -selection clipboard -i -t image/png /tmp/temp_shot.png
    <br>&nbsp;&nbsp;notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to clipboard&quot;</span>
    <br><span class="p">;;</span>
  <br><span class="nv">$windowFile</span><span class="o">)</span>
    <br>&nbsp;&nbsp;sleep 0.2
    <br>&nbsp;&nbsp;scrot -u <span class="nv">$HOME</span>/<span class="s2">&#39;pics/screenshots/%Y-%m-%d_%H%M%S.png&#39;</span>
    <br>&nbsp;&nbsp;notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to ~/pics/screenshots&quot;</span>
    <br><span class="p">;;</span>
  <br><span class="nv">$areaClip</span><span class="o">)</span>
    <br>&nbsp;&nbsp;sleep 0.2 
    <br>&nbsp;&nbsp;scrot -s /tmp/temp_shot.png
    <br>&nbsp;&nbsp;xclip -selection clipboard -i -t image/png /tmp/temp_shot.png
    <br>&nbsp;&nbsp;notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to clipboard&quot;</span>
    <br><span class="p">;;</span>  
  <br><span class="nv">$areaFile</span><span class="o">)</span>
    <br>&nbsp;&nbsp;sleep 0.2 
    <br>&nbsp;&nbsp;scrot -s <span class="nv">$HOME</span>/<span class="s2">&#39;pics/screenshots/%Y-%m-%d_%H%M%S.png&#39;</span>
    <br>&nbsp;&nbsp;notify-send -i <span class="s2">&quot;~/pics/misc/cheese.png&quot;</span> <span class="s2">&quot;Cheese!&quot;</span> <span class="s2">&quot;Saved to ~/pics/screenshots&quot;</span>
    <br><span class="p">;;</span>
<br><span class="k">esac</span>
</div>
  <p>Here’s a gif of the script in action.</p>
  <img src="https://rchu.cc/img/rofi/rofi.gif" alt="">
  <p>The basic idea of this can be used for anything you can think of. The sky’s the limit.</p>
 </div>
 <hr>
 <b>If I've gotten anything wrong and you want to let me know, or if you wanna just ask me a question find me at rickychu1001@gmail.com</b>
</div>
</body>
</html>
